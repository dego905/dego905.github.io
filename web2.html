<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validación de número de teléfono</title>
    <style>
        /* Estilos CSS */
    </style>
</head>
<body>
    <h1 style="font-size: 3em;">Sin nombre</h1>
    
    <div style="text-align: center;">
        <label for="phoneInput">Introduce un número de teléfono:</label>
        <input type="text" id="phoneInput">
        <button onclick="fetchPhoneInfo()">Validar número</button>
    </div>

    <div id="phoneInfo"></div>

    <script>
        function fetchPhoneInfo() {
            const phoneNumber = document.getElementById('phoneInput');

            if (!phoneNumber) {
                console.error('El elemento con id "phoneInput" no se encontró.');
                return;
            }

            const apiKeyNumVerify = '1a80b9ffe55da509c3efe243cea3d986'; // Tu clave de API de NumVerify
            const apiKeyGeonames = 'user_max1234'; // Tu clave de API de Geonames
            const phoneInputValue = phoneNumber.value;
            const phoneInfoDiv = document.getElementById('phoneInfo');

            // Limpiar información previa y mostrar mensaje de carga
            phoneInfoDiv.innerHTML = '<p>Cargando...</p>';

            // Validar entrada
            if (phoneInputValue.trim() === '') {
                phoneInfoDiv.innerHTML = '<p>Por favor, introduce un número de teléfono.</p>';
                return;
            }

            const urlNumVerify = `http://apilayer.net/api/validate?access_key=${apiKeyNumVerify}&number=${phoneInputValue}&country_code=&format=1`;
            const urlGeonames = `http://api.geonames.org/countryInfoJSON?country=&username=${apiKeyGeonames}`;

            Promise.all([
                fetch(urlNumVerify).then(response => response.json()),
                fetch(urlGeonames).then(response => response.json())
            ]).then(([dataNumVerify, geoData]) => {
                if (dataNumVerify.valid) {
                    const countryName = dataNumVerify.country_name;
                    const countryInfo = geoData?.geonames?.find(info => info.countryName === countryName);
                    const currency = countryInfo?.currencyCode || 'No disponible';
                    phoneInfoDiv.innerHTML = `
                        <h2>Información del número de teléfono</h2>
                        <p>Número: ${dataNumVerify.number}</p>
                        <p>Localización: ${dataNumVerify.location}</p>
                        <p>Operador: ${dataNumVerify.carrier}</p>
                        <p>Tipo de línea: ${dataNumVerify.line_type}</p>
                        <p>País: ${dataNumVerify.country_name}</p>
                        <p>Código de país: ${dataNumVerify.country_code}</p>
                        <p>Moneda local: ${currency}</p>
                        <p>Código de área: ${dataNumVerify.country_prefix}</p>
                        <p>UTC Offset: ${dataNumVerify.utc_offset}</p>
                        <p>Formato local: ${dataNumVerify.local_format}</p>
                        <p>Formato internacional: ${dataNumVerify.international_format}</p>
                        <p>Región: ${dataNumVerify.region}</p>
                        <p>Ciudad: ${dataNumVerify.city}</p>
                        <p>Tag del país: ${dataNumVerify.country_code_iso3}</p>
                    `;
                } else {
                    phoneInfoDiv.innerHTML = '<p>El número de teléfono no es válido o no se pudo encontrar información.</p>';
                }
            }).catch(error => {
                console.error('Error al obtener información del número de teléfono:', error);
                phoneInfoDiv.innerHTML = '<p>Hubo un error al obtener información del número de teléfono. Por favor, intenta de nuevo más tarde.</p>';
            });
        }
    </script>
</body>
</html>
