<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validación de número de teléfono</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        h1 {
            font-size: 2em;
            text-align: center;
            color: #333;
        }
        .login-panel {
            max-width: 400px;
            margin: 50px auto;
            padding: 20px;
            background-color: #2196F3; /* Fondo azul del panel */
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin-bottom: 10px;
        }
        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #phoneInfo {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: #fff;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1 style="font-size: 3em;">Sin nombre</h1>
    
    <div class="login-panel">
        <h2>Iniciar sesión</h2>
        <form id="loginForm">
            <label for="username">Nombre de usuario:</label>
            <input type="text" id="username" name="username">

            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password">

            <!-- Nuevo campo para el número de teléfono -->
            <label for="phoneInput">Número de teléfono:</label>
            <input type="text" id="phoneInput" name="phoneInput">

            <button type="button" onclick="login()">Iniciar sesión</button>
        </form>
        <div id="loginResult"></div>
    </div>

    <div id="phoneInfo" style="display: none;"></div>

    <script>
        function login() {
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            var phone = document.getElementById('phoneInput').value;

            if (username === 'sin nombre' && password === 'hacking') {
                document.getElementById('loginResult').innerHTML = '<p>Inicio de sesión exitoso. Bienvenido, ' + username + '.</p>';
                document.getElementById('phoneInfo').style.display = 'block';
                document.getElementById('loginForm').style.display = 'none'; // Ocultar el formulario de inicio de sesión
                // Llamar a la función para obtener información del número de teléfono
                fetchPhoneInfo();
            } else {
                document.getElementById('loginResult').innerHTML = '<p>Nombre de usuario o contraseña incorrectos.</p>';
            }
        }

        function fetchPhoneInfo() {
            const apiKeyNumVerify = '1a80b9ffe55da509c3efe243cea3d986'; // Tu clave de API de NumVerify
            const apiKeyGeonames = 'user_max1234'; // Tu clave de API de Geonames
            const phoneNumber = document.getElementById('phoneInput').value;
            const phoneInfoDiv = document.getElementById('phoneInfo');

            // Limpiar información previa y mostrar mensaje de carga
            phoneInfoDiv.innerHTML = '<p>Cargando...</p>';

            // Validar entrada
            if (phoneNumber.trim() === '') {
                phoneInfoDiv.innerHTML = '<p>Por favor, introduce un número de teléfono.</p>';
                return;
            }

            const urlNumVerify = `http://apilayer.net/api/validate?access_key=${apiKeyNumVerify}&number=${phoneNumber}&country_code=&format=1`;
            const urlGeonames = `http://api.geonames.org/countryInfoJSON?country=&username=${apiKeyGeonames}`;

            Promise.all([
                fetch(urlNumVerify).then(response => response.json()),
                fetch(urlGeonames).then(response => response.json())
            ]).then(([dataNumVerify, geoData]) => {
                if (dataNumVerify.valid) {
                    const countryName = dataNumVerify.country_name;
                    const countryInfo = geoData?.geonames?.find(info => info.countryName === countryName);
                    const currency = countryInfo?.currencyCode || 'No disponible';
                    phoneInfoDiv.innerHTML = `
                        <h2>Información del número de teléfono</h2>
                        <p>Número: ${dataNumVerify.number}</p>
                        <p>Localización: ${dataNumVerify.location}</p>
                        <p>Operador: ${dataNumVerify.carrier}</p>
                        <p>Tipo de línea: ${dataNumVerify.line_type}</p>
                        <p>País: ${dataNumVerify.country_name}</p>
                        <p>Código de país: ${dataNumVerify.country_code}</p>
                        <p>Moneda local: ${currency}</p>
                        <p>Código de área: ${dataNumVerify.country_prefix}</p>
                        <p>UTC Offset: ${dataNumVerify.utc_offset}</p>
                        <p>Formato local: ${dataNumVerify.local_format}</p>
                        <p>Formato internacional: ${dataNumVerify.international_format}</p>
                        <p>Región: ${dataNumVerify.region}</p>
                        <p>Ciudad: ${dataNumVerify.city}</p>
                        <p>Tag del país: ${dataNumVerify.country_code_iso3}</p>
                    `;
                } else {
                    phoneInfoDiv.innerHTML = '<p>El número de teléfono no es válido o no se pudo encontrar información.</p>';
                }
            }).catch(error => {
                console.error('Error al obtener información del número de teléfono:', error);
                phoneInfoDiv.innerHTML = '<p>Hubo un error al obtener información del número de teléfono. Por favor, intenta de nuevo más tarde.</p>';
            });
        }
    </script>
</body>
</html>
